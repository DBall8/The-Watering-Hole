<html lang="en">
<head>
    <title>To Do</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script>

        // before page is loaded, checks if there is a username cookie
        // if there is, send a GET query to the server to load that user's page instead
        var cookies = document.cookie;
        var cookies = cookies.split('; '); // split apart cookies
        // search cookies for a username cookie
        for (var i = 0; i < cookies.length; i++) {
            var c = (cookies[i]).split('=');
            if (c[0] == 'username') {
                // stop if username cookie is blank
                if (c[1] == '') {
                    break;
                }
                // send query with username
                window.location.href = "/login?username=" + c[1];
            }
        }

        // runs when the login button is clicked
        function mysubmit() {
            var form = document.getElementById("signinform");
            var username = form.getElementsByTagName("input")[0].value;
            // ensures a username was given
            if (username == '') {
                alert("Please enter a username.");
                return;
            }
            // sets cookie and send login in query
            document.cookie = "username=" + username + ";expires=Thu, 01 Dec 2018 00:00:01 GMT";
            form.submit();
        }
    </script>
</head>
<body>
    <div class="centerdiv">
        <h1>Sign In</h1>

        <form id="signinform" action="/login" method="GET">
            <label for="username">Username: </label><br />
            <input name="username" />
            <button type="button" onclick="mysubmit()">Log in</button>
        </form>
    </div>
</body>
</html>
